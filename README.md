# A Multimodal French Corpus of Aligned Speech, Text, and Pictogram Sequences for Speech-to-Pictogram Machine Translation
This is the scripts to run the formalism from the [LREC-Coling 2024](https://lrec-coling-2024.org/) paper [**"A Multimodal French Corpus of Aligned Speech, Text, and Pictogram Sequences for Speech-to-Pictogram Machine Translation"**](https://hal.science/hal-04534234).

‚≠ê Do not hesitate to test it and report any bugs, feedback, or results.

## ‚≠ê NEW ‚≠ê

A new version of the grammar was developed, along with a lexicon, with new lemmas added to the ARASAAC lexicon. <br/>
To run the new version, use the `grammar-v2.py` script with the `data/lexicon-v3.csv` as the lexicon. <br/>
The updated dataset (propicto-orfeo) is available on HuggingFace: https://huggingface.co/Propicto and in **data/output_data/v2** folder. <br/>

## üîç Overview

Our **PictoGrammar** model aims to provide an [Arasaac](https://arasaac.org/) pictogram translation of a speech transcription (or text).
<div align="center">
  <img src="img/pipeline.png" width="40%">
</div>

**PictoGrammar** uses a set of models: (1) [SpaCy](https://spacy.io/) to tokenize, lemmatize, and post-tag, (2) a [Named Entity Recognition (NER) model](https://huggingface.co/Jean-Baptiste/camembert-ner) based on CamemBERT, and (3) a Word Sense Disambiguation (WSD) model. 

## ‚öôÔ∏è Requirements and Installation
 - Python >= 3.9
 - PyTorch >= 1.10
 - Transformers >= 4.26
 - SpaCy french model -- *fr_dep_news_trf*
 - WSD library -- https://github.com/macairececile/nwsd

```bash
git clone https://github.com/macairececile/picto_grammar.git
cd picto_grammar/
pip install -r requirements.txt
git clone https://github.com/macairececile/nwsd.git
export PYTHONPATH=$PYTHONPATH:/path_to_nwsd/nwsd/src
```  
Be sure to export the PYTHONPATH to be able to run the WSD model.
Then, download the WSD model via this link: https://huggingface.co/Propicto/wsd-camembert-base-semcor-wngt-fr and decompress it in picto_grammar/data/ folder.

## üìâ Running PictoGrammar

The repository is organized into 4 folders:

 - **src/** 	-- Python scripts to run the grammar.
 - **img/** -- Images.
 - **data/** -- Folder with the data used in the paper.
 - **examples/** -- Folder with examples of output files generated by the grammar.



```bash
python src/grammar.py --wn_file "data/dico/index.sense" --no_transl "data/dico/no_translation.csv" --wsd "data/wsd_model/" --lexicon "data/dico/lexicon.csv" --data "examples/input.csv" --out "examples/out.csv" --tags "data/dico/tags.csv"
```
An **out.html** file will be generated to display the output sequence.

##  üìù Citation

```
@inproceedings{macaire_lrec2024,
  title = {A Multimodal French Corpus of Aligned Speech, Text, and Pictogram Sequences for Speech-to-Pictogram Machine Translation},
  author = {Macaire, C{\'e}cile and Dion, Chlo{\'e} and Arrigo, Jordan and Lemaire, Claire and Esperan{\c c}a-Rodier, Emmanuelle and Lecouteux, Benjamin and Schwab, Didier},
  url = {https://hal.science/hal-04534234},
  booktitle = {LREC-Coling},
  address = {Turin, Italy},
  year = {2024},
  month = May,
  keywords = {Pictograms ; Speech ; Machine Translation},
  pdf = {https://hal.science/hal-04534234/file/1210_Paper_LREC_Coling_Macaire.pdf},
  hal_id = {hal-04534234}
}
```

